<div class="navbar">
    <div class="nav-breadcrumbs">
        <a class="nav-breadcrumbs__link" routerLink="" *ngIf="user">Your Projects</a>
        <a class="nav-breadcrumbs__link" routerLink="/auth/login" *ngIf="!user">Login</a>
        <span class="nav-breadcrumbs__separator" *ngIf="!user">/</span>
        <a class="nav-breadcrumbs__link" routerLink="/auth/register" *ngIf="!user">Register</a>
        <span class="nav-breadcrumbs__separator" *ngIf="projectName !== ''">/</span>
        <div class="nav-breadcrumbs__link menu-container" *ngIf="projectName !== ''" [class.active]="showProjectsList">
            <button class="btn text small-btn dropdown-toggle px-0 bg-transparent" type="button"
                    id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"
                    (click)="showProjectsList = !showProjectsList">
                <span class="material-symbols-rounded text-base">view_kanban</span>
                {{ projectName }}
                <i class="material-symbols-rounded text-lg">expand_more</i>
            </button>
            <div class="menu-content" #menuPageSize aria-labelledby="dropdownMenuButton1">
                <mat-input [placeholder]="'Search...'" [small]="true" [(value)]="searchTerm" class="mb-1"
                           [showClear]="true"></mat-input>
                <div *ngFor="let project of projects" class="menu-item"
                     [class.hidden]="searchTerm !== null && searchTerm !== '' && !project.title.toLowerCase().includes(searchTerm.toLowerCase())"
                     [class.active]="project.title === projectName"
                     (click)="navigateToProject(project)">
                    <i class="material-symbols-rounded primary-color"
                       *ngIf="project.title === projectName">check_box</i>
                    <i class="material-symbols-rounded"
                       *ngIf="project.title !== projectName">check_box_outline_blank</i>
                    {{ project.title }}
                </div>
            </div>
        </div>
    </div>
    <h2 class="nav-title text-lg" *ngIf="!user">Project Manager</h2>
    <div class="profile-dropdown" *ngIf="user" (click)="profileExpanded = !profileExpanded"
         [class.expanded]="profileExpanded">
        <img class="border-circle" style="width: 36px;" [src]="userImage" alt="User Avatar" *ngIf="userImage">

        <div class="profile-dropdown__content">
            <div class="profile-info gap-3 align-items-start">
                <img class="border-circle" style="width: 46px;" [src]="userImage" alt="User Avatar" *ngIf="userImage">
                <div class="flex flex-column gap-2">
                    <span class="font-regular text-color">{{ user?.displayName }}</span>
                    <span class="font-regular text-secondary">{{ user?.email }}</span>
                    <button class="btn btn-outline btn-sm mt-2" routerLink="/auth/profile">Manage your profile</button>
                </div>
            </div>
            <a class="profile-dropdown__item text-color font-medium" routerLink="/auth/login" (click)="logout()">
                <i class="material-symbols-rounded text-color">logout</i>
                <span>Close this session</span>
            </a>
        </div>
    </div>
    <div class="overlay" *ngIf="profileExpanded" (click)="profileExpanded = !profileExpanded"></div>
</div>
